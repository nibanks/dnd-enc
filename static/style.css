* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: 
        radial-gradient(ellipse at 20% 30%, rgba(220, 20, 60, 0.4) 0%, transparent 40%),
        radial-gradient(ellipse at 80% 70%, rgba(255, 140, 0, 0.4) 0%, transparent 40%),
        repeating-linear-gradient(45deg, 
            rgba(139, 0, 0, 0.15) 0px, 
            rgba(139, 0, 0, 0.15) 3px, 
            transparent 3px, 
            transparent 15px),
        repeating-linear-gradient(-45deg, 
            rgba(184, 134, 11, 0.12) 0px, 
            rgba(184, 134, 11, 0.12) 3px, 
            transparent 3px, 
            transparent 15px),
        linear-gradient(135deg, #1a0505 0%, #0a0a1a 25%, #1a1000 50%, #0a0a1a 75%, #1a0505 100%);
    background-size: 100% 100%, 100% 100%, 30px 30px, 30px 30px, 100% 100%;
    background-attachment: fixed;
    min-height: 100vh;
    padding: 20px;
    position: relative;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 15% 20%, rgba(255, 215, 0, 0.15) 0%, transparent 25%),
        radial-gradient(circle at 85% 80%, rgba(220, 20, 60, 0.15) 0%, transparent 25%),
        radial-gradient(circle at 50% 10%, rgba(255, 69, 0, 0.1) 0%, transparent 30%);
    pointer-events: none;
    z-index: 0;
}

body::after {
    content: '';
    position: fixed;
    font-size: 400px;
    opacity: 0.15;
    top: 50%;
    left: 50%;
    width: 500px;
    height: 500px;
    transform: translate(-50%, -50%) rotate(-15deg);
    pointer-events: none;
    z-index: 0;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500'%3E%3Cpath d='M250 50 L280 100 L320 80 L300 130 L350 150 L310 180 L340 220 L300 230 L310 280 L270 270 L260 320 L240 280 L200 300 L210 250 L170 240 L200 200 L160 170 L200 160 L180 120 L220 130 L230 90 Z M250 150 Q260 140 270 150 T290 180 Q290 200 280 210 T250 230 Q230 230 220 220 T200 190 Q200 170 210 160 T240 150 Q245 150 250 150 Z M180 250 L160 280 L140 260 L150 230 Z M320 250 L340 280 L360 260 L350 230 Z M240 350 L250 400 L260 350 L280 370 L270 340 L250 360 L230 340 L220 370 Z M100 200 L90 160 L70 180 L80 140 L60 150 L75 120 L50 130 L70 100 L45 105 L65 80 L90 90 L100 60 L120 85 L130 60 L140 90 Z M400 200 L410 160 L430 180 L420 140 L440 150 L425 120 L450 130 L430 100 L455 105 L435 80 L410 90 L400 60 L380 85 L370 60 L360 90 Z' fill='%23ff4500' stroke='%23b22222' stroke-width='2' opacity='0.4'/%3E%3Cpath d='M245 140 L248 145 L255 147 L250 152 L251 159 L245 155 L239 159 L240 152 L235 147 L242 145 Z M270 300 L273 305 L280 307 L275 312 L276 319 L270 315 L264 319 L265 312 L260 307 L267 305 Z M220 300 L223 305 L230 307 L225 312 L226 319 L220 315 L214 319 L215 312 L210 307 L217 305 Z' fill='%23ffd700' opacity='0.6'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    filter: drop-shadow(0 0 30px rgba(220, 20, 60, 0.8)) drop-shadow(0 0 60px rgba(255, 69, 0, 0.5));
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    padding: 30px;
}

header {
    margin-bottom: 30px;
    border-bottom: 3px solid #667eea;
    padding-bottom: 20px;
}

header h1 {
    color: #333;
    margin-bottom: 15px;
}

.header-controls {
    display: flex;
    gap: 10px;
    align-items: center;
}

select, button, input {
    padding: 10px 15px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    font-family: inherit;
}

select {
    flex: 1;
    max-width: 300px;
}

button {
    background: #667eea;
    color: white;
    border: none;
    padding: 8px 12px;
    cursor: pointer;
    transition: background 0.3s;
}

button:hover {
    background: #5568d3;
}

button.btn-danger {
    background: #e74c3c;
}

button.btn-danger:hover {
    background: #c0392b;
}

.section {
    margin-bottom: 40px;
}

.section h2 {
    color: #333;
    margin-bottom: 15px;
    font-size: 24px;
}

.btn-add {
    margin-bottom: 15px;
    padding: 8px 12px;
    background: #2ecc71;
}

.btn-add:hover {
    background: #27ae60;
}

.table-container {
    overflow-x: auto;
    border: 1px solid #ddd;
    border-radius: 8px;
}

table {
    width: 100%;
    border-collapse: collapse;
    background: white;
}

thead {
    background: #f8f9fa;
}

th {
    padding: 8px 6px;
    text-align: left;
    font-weight: 600;
    color: #555;
    border-bottom: 2px solid #ddd;
}

td {
    padding: 6px;
    border-bottom: 1px solid #eee;
}

#playersTable td {
    padding: 4px;
}

#playersTable input[type="text"],
#playersTable input[type="number"],
#playersTable select {
    width: initial;
}

tr:hover {
    background: #f8f9fa;
}

input[type="text"],
input[type="number"] {
    width: 100%;
    padding: 6px 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box;
}

/* Remove spinner arrows from number inputs except HP, DMG, and Heal */
input[type="number"]:not(.hp-input):not(.dmg-input):not(.heal-input)::-webkit-inner-spin-button,
input[type="number"]:not(.hp-input):not(.dmg-input):not(.heal-input)::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

input[type="number"]:not(.hp-input):not(.dmg-input):not(.heal-input) {
    -moz-appearance: textfield;
}

select {
    box-sizing: border-box;
}

table input[type="text"],
table input[type="number"] {
    min-width: 50px;
    max-width: 100%;
}

input[type="text"]:focus,
input[type="number"]:focus {
    outline: none;
    border-color: #667eea;
}

.btn-small {
    padding: 5px 10px;
    font-size: 12px;
}

.encounter-card {
    background: #f8f9fa;
    border: 2px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    cursor: move;
    transition: all 0.2s ease;
}

.encounter-card:hover {
    border-color: #3498db;
    box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
}

.encounter-card[draggable="true"] {
    cursor: grab;
}

.encounter-card:active {
    cursor: grabbing;
}

.encounter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.encounter-title {
    font-size: 20px;
    font-weight: 600;
    color: #333;
}

.encounter-controls {
    display: flex;
    gap: 10px;
}

.combatant-row {
    background: white;
}

.combatant-row.active {
    background: #fff3cd;
    border-left: 4px solid #ffc107;
}

.status-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    background: #e9ecef;
    color: #495057;
    margin-right: 4px;
}

.auto-save-indicator {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #2ecc71;
    color: white;
    padding: 10px 20px;
    border-radius: 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    opacity: 0;
    transition: opacity 0.3s;
}

.auto-save-indicator.show {
    opacity: 1;
}

/* Monster Selection Modal */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.modal-content {
    background: white;
    border-radius: 12px;
    width: 90%;
    max-width: 800px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    border-bottom: 2px solid #ddd;
}

.modal-header h2 {
    margin: 0;
    color: #333;
}

.close-btn {
    background: none;
    border: none;
    font-size: 32px;
    color: #999;
    cursor: pointer;
    padding: 0;
    width: 40px;
    height: 40px;
    line-height: 32px;
}

.close-btn:hover {
    color: #333;
}

.modal-body {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

#monsterSearch {
    width: 100%;
    padding: 12px 15px;
    font-size: 16px;
    border: 2px solid #ddd;
    border-radius: 8px;
    margin-bottom: 15px;
}

#monsterSearch:focus {
    outline: none;
    border-color: #667eea;
}

.monster-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.monster-item {
    border: 2px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    cursor: pointer;
    transition: all 0.2s;
    background: white;
}

.monster-item:hover {
    border-color: #667eea;
    background: #f8f9ff;
    transform: translateX(5px);
}

.monster-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.monster-name {
    font-size: 18px;
    font-weight: 600;
    color: #333;
}

.monster-cr {
    background: #667eea;
    color: white;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
}

.monster-stats {
    display: flex;
    gap: 20px;
    color: #666;
    font-size: 14px;
}

.monster-stat {
    display: flex;
    align-items: center;
    gap: 5px;
}

.monster-stat-label {
    font-weight: 600;
}

.no-results {
    text-align: center;
    padding: 40px;
    color: #999;
    font-size: 16px;
}

/* Monster Tooltip */
.monster-tooltip {
    position: fixed;
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    color: #fff;
    padding: 16px;
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    z-index: 10000;
    max-width: 500px;
    min-width: 350px;
    max-height: 80vh;
    overflow-y: auto;
    pointer-events: auto;
    font-size: 13px;
    line-height: 1.5;
    border: 2px solid #667eea;
}

/* Custom scrollbar for tooltip */
.monster-tooltip::-webkit-scrollbar {
    width: 8px;
}

.monster-tooltip::-webkit-scrollbar-track {
    background: #2d2d2d;
    border-radius: 4px;
}

.monster-tooltip::-webkit-scrollbar-thumb {
    background: #667eea;
    border-radius: 4px;
}

.monster-tooltip::-webkit-scrollbar-thumb:hover {
    background: #7c8ff0;
}

.monster-tooltip-header {
    border-bottom: 2px solid #667eea;
    padding-bottom: 10px;
    margin-bottom: 12px;
}

.monster-tooltip-title {
    font-size: 18px;
    font-weight: bold;
    color: #ffd700;
    margin-bottom: 4px;
}

.monster-tooltip-meta {
    font-size: 12px;
    color: #aaa;
    font-style: italic;
}

.monster-tooltip-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid #444;
}

.monster-tooltip-stat {
    display: flex;
    justify-content: space-between;
}

.monster-tooltip-stat-label {
    color: #999;
    font-weight: 500;
}

.monster-tooltip-stat-value {
    color: #fff;
    font-weight: bold;
}

.monster-tooltip-abilities {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 8px;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid #444;
}

.monster-tooltip-ability {
    text-align: center;
}

.monster-tooltip-ability-name {
    font-size: 10px;
    color: #999;
    text-transform: uppercase;
    font-weight: bold;
}

.monster-tooltip-ability-score {
    font-size: 14px;
    color: #fff;
    font-weight: bold;
}

.monster-tooltip-ability-mod {
    font-size: 11px;
    color: #667eea;
}

.monster-tooltip-section {
    margin-bottom: 10px;
}

.monster-tooltip-section-title {
    color: #ffd700;
    font-weight: bold;
    font-size: 14px;
    margin-bottom: 4px;
    text-transform: uppercase;
}

.monster-tooltip-section-content {
    color: #ddd;
    margin-left: 8px;
}

.monster-tooltip-action {
    margin-bottom: 8px;
}

.monster-tooltip-action-name {
    color: #ff6b6b;
    font-weight: bold;
}

.monster-tooltip-action-desc {
    color: #ccc;
    font-size: 12px;
}

.monster-tooltip-loading {
    text-align: center;
    color: #999;
    font-style: italic;
}

.monster-name-hover {
    position: relative;
    cursor: help;
}

.monster-name-hover::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 1px;
    background: currentColor;
    opacity: 0.3;
}
/* Condition Badges */
.condition-badge {
    display: inline-block;
    padding: 0;
    border-radius: 10px;
    font-size: 18px;
    font-weight: 600;
    color: inherit;
    margin: 0;
    white-space: nowrap;
}

/* Death Save Boxes */
.death-save-box {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid #27ae60;
    border-radius: 50%;
    text-align: center;
    line-height: 12px;
    font-size: 10px;
    color: transparent;
    cursor: pointer;
    background: white;
    transition: all 0.2s;
}

.death-save-box:hover {
    background: #f0f0f0;
    transform: scale(1.1);
}

.death-save-box.checked {
    background: #27ae60;
    color: white;
}

.death-save-box.failure {
    border-color: #e74c3c;
}

.death-save-box.failure.checked {
    background: #e74c3c;
}